<!DOCTYPE html>
<html>
  <head>
    <title>Get Screen Details</title>
  </head>
  <body id="mybody" style="max-width:100vw;max-height:100vh;background:black">
    <h1 style="color:white;">Screen Details</h1>
    <button onclick="getDetails()" style="position:fixed;top:100px;left:15px;">Get Details</button>
    <div id="square" style="width:100px;height:100px;position:fixed;border:2px dashed green;"></div>
    <script>
      function getDetails() {localStorage.clear()}
      
      const queryString = window.location.search;
      const urlParams = new URLSearchParams(queryString);
      const identificator = urlParams.get('screen');
      
      let colors = ["red", "blue", "green", "purple"];
      let body = document.getElementById("mybody");
      let square = document.getElementById("square");

      square.style.background = colors[identificator]
      square.style.top = window.innerHeight/2 - 50 + 'px'
      square.style.left = window.outerWidth/2 - 50 + 'px'
      localStorage.setItem(identificator, identificator)
      localStorage.setItem(`width-${identificator}`, (window.outerWidth/2)-50)
      localStorage.setItem(`height-${identificator}`, (window.innerHeight/2)-50)
      localStorage.setItem(`color-${identificator}`, colors[identificator])
      localStorage.setItem(`top-${identificator}`, window.screenTop)
      localStorage.setItem(`left-${identificator}`, window.screenLeft)
      console.log(localStorage)

      let newDiv
      for(let i=0; i<10;i++){
        if(!localStorage.getItem(identificator)) break;
        if(i== identificator) continue;
        newDiv = document.createElement('div');
        newDiv.style.position = "fixed"
        newDiv.style.background = localStorage.getItem(`color-${i}`)
        newDiv.style.top = (Number(localStorage.getItem(`height-${i}`))/2) -50 + Number(localStorage.getItem(`top-${i}`)) + 'px'
        newDiv.style.left = (Number(localStorage.getItem(`width-${i}`))/2) -50 + Number(localStorage.getItem(`left-${i}`)) + 'px'
        newDiv.style.height = '100px'
        newDiv.style.width = '100px'
        body.appendChild(newDiv)
      }
      // location.reload()
    </script>
  </body>
</html>
