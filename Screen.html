<!DOCTYPE html>
<html>
  <head>
    <title>Get Screen Details</title>
  </head>
  <body id="mybody" style="max-width:100vw;max-height:100vh;background:white">
    <div id="app"></div>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="text/jsx">
      let colors = ["red", "blue", "green", "purple"];

      const queryString = window.location.search;
      const urlParams = new URLSearchParams(queryString);
      let identificator = urlParams.get('screen');

      if(!identificator){
        for(let i = 0;i<4;i++){
          if(!localStorage.getItem(i)){
            location.replace(`file:///C:/Users/r-j-1/Repos/html-projects/Multi-Screen-html/Screen.html?screen=${i}`)
            break;
          }
        }
      }

      localStorage.setItem(identificator, identificator)
      localStorage.setItem(`width-${identificator}`, window.outerWidth)
      localStorage.setItem(`height-${identificator}`, window.innerHeight)
      localStorage.setItem(`color-${identificator}`, colors[identificator])
      localStorage.setItem(`top-${identificator}`, window.screenTop)
      localStorage.setItem(`left-${identificator}`, window.screenLeft)
      console.log(localStorage)

      
      window.onbeforeunload = function(){
        localStorage.removeItem(identificator)
        localStorage.removeItem(`width-${identificator}`)
        localStorage.removeItem(`height-${identificator}`)
        localStorage.removeItem(`color-${identificator}`)
        localStorage.removeItem(`top-${identificator}`)
        localStorage.removeItem(`left-${identificator}`)
     }

      function Square ({ number=0 }) {
        React.useEffect(()=>{
          myTop = Number(localStorage.getItem(`top-${number}`))
          myLeft = Number(localStorage.getItem(`left-${number}`))
          myHeight = Number(localStorage.getItem(`height-${number}`))
          myWidth = Number(localStorage.getItem(`width-${number}`))  
        },[localStorage])
        let myTop = Number(localStorage.getItem(`top-${number}`))
        let myLeft = Number(localStorage.getItem(`left-${number}`))
        let myHeight = Number(localStorage.getItem(`height-${number}`))
        let myWidth = Number(localStorage.getItem(`width-${number}`))
        console.log(number, myTop, myLeft, myHeight, myWidth)
        return <div id="square" 
          style={{
            position:'fixed',
            background:'transparent',
            width: 100 + number*20 + 'px',
            height:100 + number*20 + 'px',
            border:'2px dashed ' + colors[number],
            top: (myHeight/2)-100-(number*10) + myTop + 'px',
            left:(myWidth/2)-100-(number*10) + myLeft +'px'
          }}
        ></div>
      }

      const app = document.getElementById('app');
      ReactDOM.render(<>{
        [0,1,2,3].map((i)=> localStorage.getItem(i) ? <Square key={i} number={i}/> : null )
      }</>, app);
    </script>
  </body>
</html>
